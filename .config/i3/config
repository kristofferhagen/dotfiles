# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

# Supported keyboard character names:
# https://help.ubuntu.com/community/GtkComposeTable

# Use the Windows key as modifier
set $mod Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:monospace 8

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
bindsym $mod+Return exec i3-sensible-terminal

# kill focused window
bindsym $mod+Shift+q kill

# start dmenu (a program launcher)
#bindsym $mod+d exec dmenu_run
# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
# bindsym $mod+d exec --no-startup-id i3-dmenu-desktop

# change focus
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
# bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

set $ws1 "1:  "
set $ws2 "2:  "
set $ws3 "3:  "
set $ws4 "4:  "
set $ws5 "5:  "
set $ws6 "6:  "
set $ws7 "7:  "
set $ws8 "8:  "
set $ws9 "9:  "
set $ws10 "10:  "

# switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# resize window (you can also use the mouse for that)
mode "resize" {
    # These bindings trigger as soon as you enter the resize mode

    # Pressing left  will shrink the window’s width.
    # Pressing right will grow   the window’s width.
    # Pressing down  will grow   the window’s height.
    # Pressing up    will shrink the window’s height.
    bindsym Left  resize shrink width  10 px or 10 ppt
    bindsym Right resize grow   width  10 px or 10 ppt
    bindsym Up    resize shrink height 10 px or 10 ppt
    bindsym Down  resize grow   height 10 px or 10 ppt

    bindsym Shift+Left  resize shrink width  5 px or 5 ppt
    bindsym Shift+Right resize grow   width  5 px or 5 ppt
    bindsym Shift+Up    resize shrink height 5 px or 5 ppt
    bindsym Shift+Down  resize grow   height 5 px or 5 ppt

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
# bar {
#         status_command i3status
# }

exec_always --no-startup-id ~/.config/i3/polybar.sh &
exec_always --no-startup-id feh --bg-scale ~/Pictures/Wallpapers/stoat2.png

exec_always --no-startup-id compton --config ~/.compton.conf

gaps inner 5
gaps outer 0
smart_gaps on

new_window pixel 1

# client.focused
#   A client which currently has the focus.
#
# client.focused_inactive
#   A client which is the focused one of its container, but it does not have
#   the focus at the moment.
#
# client.unfocused
#   A client which is not the focused one of its container.
#
# client.urgent
#   A client which has its urgency hint activated.
#
# client.placeholder
#   Background and text color are used to draw placeholder window contents
#   (when restoring layouts). Border and indicator are ignored.
#
# client.background
#   Background color which will be used to paint the background of the client
#   window on top of which the client will be rendered. Only clients which do
#   not cover the whole area of this window expose the color. Note that this
#   colorclass only takes a single color.
#
#                       border  backgr. text    indica. child_border
client.focused          #282c34 #282c34 #abb2bf #61afef #282c34
client.focused_inactive #282c34 #282c34 #5c6370 #61afef #282c34
client.unfocused        #282c34 #282c34 #5c6370 #61afef #282c34
client.urgent           #be5046 #282c34 #282c34 #61afef #be5046
client.placeholder      #000000 #282c34 #5c6370 #000000 #282c34
client.background       #ffffff

bindsym --release $mod+Shift+s exec ~/.config/i3/screenshot.sh

bindsym XF86AudioPlay  exec playerctl play-pause
bindsym XF86AudioPause exec playerctl play-pause
bindsym XF86AudioNext  exec playerctl next
bindsym XF86AudioPrev  exec playerctl previous

# Pulse Audio controls
bindsym XF86AudioMute        exec --no-startup-id pactl set-sink-mute 0 toggle
bindsym XF86AudioRaiseVolume exec --no-startup-id amixer -D pulse sset Master 1%+
bindsym XF86AudioLowerVolume exec --no-startup-id amixer -D pulse sset Master 1%-
bindsym Shift+XF86AudioRaiseVolume exec --no-startup-id amixer -D pulse sset Master 5%+
bindsym Shift+XF86AudioLowerVolume exec --no-startup-id amixer -D pulse sset Master 5%-

# TODO: $mod+Shift+l only shows the background image, not a blurred screenshot
bindsym $mod+Shift+l exec i3lock --image Pictures/Wallpapers/stoat2.png --ignore-empty-password
bindsym $mod+l exec ~/.config/i3/lock.sh

bindsym $mod+Shift+f exec firefox

# Source 2 is the microphone
# TODO: This has changed; source 2 is no longer the microphone
#bindsym Ctrl+Shift+F12 exec pactl set-source-mute 2 toggle && ~/.config/i3/mute-sound.sh

focus_follows_mouse no

bindsym $mod+d exec rofi -show run -matching fuzzy
bindsym $mod+Shift+d exec rofi -show drun -matching fuzzy
# bindsym $mod+Tab exec rofi -show window -matching fuzzy

# https://gitcrate.org/qtools/rofi-top
bindsym $mod+t exec rofi -show top -modi top

bindsym $mod+g exec ~/.config/rofi/bin/rofi-godoc-stdlib.sh

# TODO: Consider adding https://github.com/dunst-project/dunst
# TODO: associate certain programs with a specific workspace

assign [class="discord"] $ws9

# for_window [class="Spotify"] move to workspace $ws10
# The line below doesn't work since Spotify doesn't set hints when mapping the window
# See: https://github.com/i3/i3/issues/2060
# assign [class="Spotify"] $ws10

for_window [class="Spotify"] move scratchpad
bindsym $mod+s exec ~/.config/i3/spotify.sh


#bindsym $mod+Tab exec "i3-msg workspace $(i3-msg -t get_workspaces | jq '(.[] | select(.visible) | .num) as $current | [(.[] | select(.num > $current)), .[0]] | first .name')"
#bindsym $mod+Tab workspace back_and_forth
bindsym $mod+Shift+Tab workspace prev
bindsym $mod+Tab workspace next

bindsym $mod+bar workspace back_and_forth

bindsym $mod+shift+m exec mpv `rofi -dmenu -p "mpv"`

for_window [class="keepassxc"] move scratchpad
bindsym $mod+k exec ~/.config/i3/keepassxc.sh

bindsym $mod+m mode "MARK"
mode "MARK" {
    bindsym a mark --add a; mode "default"
    bindsym b mark --add b; mode "default"
    bindsym c mark --add c; mode "default"
    bindsym d mark --add d; mode "default"
    bindsym e mark --add e; mode "default"
    bindsym f mark --add f; mode "default"
    bindsym g mark --add g; mode "default"
    bindsym h mark --add h; mode "default"
    bindsym i mark --add i; mode "default"
    bindsym j mark --add j; mode "default"
    bindsym k mark --add k; mode "default"
    bindsym l mark --add l; mode "default"
    bindsym m mark --add m; mode "default"
    bindsym n mark --add n; mode "default"
    bindsym o mark --add o; mode "default"
    bindsym p mark --add p; mode "default"
    bindsym q mark --add q; mode "default"
    bindsym r mark --add r; mode "default"
    bindsym s mark --add s; mode "default"
    bindsym t mark --add t; mode "default"
    bindsym u mark --add u; mode "default"
    bindsym v mark --add v; mode "default"
    bindsym w mark --add w; mode "default"
    bindsym x mark --add x; mode "default"
    bindsym y mark --add y; mode "default"
    bindsym z mark --add z; mode "default"

    bindsym Escape mode "default"
}

bindsym $mod+apostrophe mode "JUMP"
mode "JUMP" {
    bindsym a [con_mark="a"] focus; mode "default"
    bindsym b [con_mark="b"] focus; mode "default"
    bindsym c [con_mark="c"] focus; mode "default"
    bindsym d [con_mark="d"] focus; mode "default"
    bindsym e [con_mark="e"] focus; mode "default"
    bindsym f [con_mark="f"] focus; mode "default"
    bindsym g [con_mark="g"] focus; mode "default"
    bindsym h [con_mark="h"] focus; mode "default"
    bindsym i [con_mark="i"] focus; mode "default"
    bindsym j [con_mark="j"] focus; mode "default"
    bindsym k [con_mark="k"] focus; mode "default"
    bindsym l [con_mark="l"] focus; mode "default"
    bindsym m [con_mark="m"] focus; mode "default"
    bindsym n [con_mark="n"] focus; mode "default"
    bindsym o [con_mark="o"] focus; mode "default"
    bindsym p [con_mark="p"] focus; mode "default"
    bindsym q [con_mark="q"] focus; mode "default"
    bindsym r [con_mark="r"] focus; mode "default"
    bindsym s [con_mark="s"] focus; mode "default"
    bindsym t [con_mark="t"] focus; mode "default"
    bindsym u [con_mark="u"] focus; mode "default"
    bindsym v [con_mark="v"] focus; mode "default"
    bindsym w [con_mark="w"] focus; mode "default"
    bindsym x [con_mark="x"] focus; mode "default"
    bindsym y [con_mark="y"] focus; mode "default"
    bindsym z [con_mark="z"] focus; mode "default"

    bindsym Escape mode "default"
}

bindsym $mod+Shift+apostrophe mode "MOVE"
mode "MOVE" {
    bindsym a move container to mark a; mode "default"
    bindsym b move container to mark b; mode "default"
    bindsym c move container to mark c; mode "default"
    bindsym d move container to mark d; mode "default"
    bindsym e move container to mark e; mode "default"
    bindsym f move container to mark f; mode "default"
    bindsym g move container to mark g; mode "default"
    bindsym h move container to mark h; mode "default"
    bindsym i move container to mark i; mode "default"
    bindsym j move container to mark j; mode "default"
    bindsym k move container to mark k; mode "default"
    bindsym l move container to mark l; mode "default"
    bindsym m move container to mark m; mode "default"
    bindsym n move container to mark n; mode "default"
    bindsym o move container to mark o; mode "default"
    bindsym p move container to mark p; mode "default"
    bindsym q move container to mark q; mode "default"
    bindsym r move container to mark r; mode "default"
    bindsym s move container to mark s; mode "default"
    bindsym t move container to mark t; mode "default"
    bindsym u move container to mark u; mode "default"
    bindsym v move container to mark v; mode "default"
    bindsym w move container to mark w; mode "default"
    bindsym x move container to mark x; mode "default"
    bindsym y move container to mark y; mode "default"
    bindsym z move container to mark z; mode "default"

    bindsym Escape mode "default"
}
